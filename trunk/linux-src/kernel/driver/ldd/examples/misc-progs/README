
1. asynctest.c
[<P169>]


1.1 注册 SIGIO 信号处理函数:

action.sa_handler = sighandler;

1)
[scr misc-progs]$ ./asynctest
a
a

2)
## 测试 scullpipe
# 从 /dev/scullpipe 中读取数据
[scr misc-progs]$ ./asynctest < /dev/scullpipe
jj
llllllllll

# 写入数据到 /dev/scullpipe
[root misc-progs]# cat > /dev/scullpipe
jj
llllllllll




1.2 没有注册 SIGIO 信号处理函数:

action.sa_handler = sighandler;

[scr misc-progs]$ ./asynctest
aI/O possible

出错信息表明: I/O可用了!



2. nbtest.c

测试非阻塞型操作

[scr misc-progs]$ ./nbtest
end of file
j
j


[scr misc-progs]$ strace -c ./nbtest
jjjjjjj
jjjjjjj
aaaaaaaaaaaaaa
 % time     seconds  usecs/call     calls    errors syscall
 ------ ----------- ----------- --------- --------- ----------------
 43.39   0.000289         289         1             execve
 12.46   0.000083          14         6         4   read
 8.86    0.000059           6        10             rt_sigprocmask
 8.41    0.000056          56         1             write
 6.31    0.000042           7         6             old_mmap
 4.35    0.000029          15         2             mprotect
 3.30    0.000022          11         2             open
 3.15    0.000021          21         1             munmap
 2.25    0.000015           4         4             fcntl64
 1.80    0.000012           2         5             rt_sigaction
 1.65    0.000011          11         1         1   access
 1.20    0.000008           2         4             nanosleep
 1.05    0.000007           4         2             fstat64
 0.90    0.000006           3         2             close
 0.45    0.000003           3         1             brk
 0.45    0.000003           3         1             set_thread_area
 ------ ----------- ----------- --------- --------- ----------------
 100.00    0.000666                    49         5 total
